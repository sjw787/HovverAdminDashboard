SES SANDBOX MODE ISSUE - SOLUTION
==================================
Date: January 17, 2026

ERROR MESSAGE
-------------
"Email address is not verified. The following identities failed the check
in region US-EAST-1: sjw787.sw+test@gmail.com"

ROOT CAUSE
----------
✅ Domain verified: samwylock.com
✅ FROM address works: noreply@samwylock.com
❌ PROBLEM: SES is in SANDBOX MODE

In sandbox mode:
- Can send FROM verified domains ✅
- Can ONLY send TO verified email addresses ❌
- This is for testing only
- Production use requires moving out of sandbox

SOLUTION OPTIONS
----------------

OPTION 1: Verify Test Email (Quick Fix for Testing)
----------------------------------------------------
Verify the recipient email so you can test:

Command:
  aws ses verify-email-identity --email-address sjw787.sw+test@gmail.com --region us-east-1

Then:
1. Check the email inbox (sjw787.sw+test@gmail.com)
2. Click the verification link in the email from AWS
3. Wait a few minutes
4. Try creating a customer again

This works for testing but you'd need to verify every customer email!

OPTION 2: Request Production Access (RECOMMENDED)
--------------------------------------------------
Move SES out of sandbox mode so you can send to ANY email address.

Steps:
1. Go to AWS Console: https://console.aws.amazon.com/ses/
2. Switch to region: us-east-1
3. Click "Account dashboard" in left menu
4. Find "Production access" section
5. Click "Request production access" button
6. Fill out the form:
   - Mail type: Transactional
   - Website URL: https://samwylock.com
   - Use case description:
     "Sending welcome emails and password reset emails to customers
      of our admin dashboard application. Emails are sent only to
      users who have registered accounts."
   - Compliance: Yes (customers opt-in by creating account)
   - Process bounce/complaints: Yes (will implement)
   - Sending rate: Start with 1 email/second
7. Submit request

Processing time: Usually 24-48 hours

Benefits:
✅ Send to ANY email address (no verification needed)
✅ Higher sending limits
✅ Production-ready
✅ No need to manage verified email list

OPTION 3: Verify Multiple Test Emails (For Testing)
---------------------------------------------------
If you need to test with multiple emails before production access:

# Verify your main test email
aws ses verify-email-identity --email-address sjw787.sw+test@gmail.com --region us-east-1

# Verify additional test emails
aws ses verify-email-identity --email-address sjw787.sw+test2@gmail.com --region us-east-1
aws ses verify-email-identity --email-address your.other.email@gmail.com --region us-east-1

Each email will receive a verification link from AWS.

CURRENT STATUS CHECK
--------------------
Run this to see current status:
  python check_ses_sandbox.py

Look for:
- Sandbox Mode: Yes/No
- Max 24hr send: Low number = sandbox, high number = production
- Verified identities: List of verified emails

TESTING WORKFLOW (While in Sandbox)
------------------------------------
1. Verify your test email address
   aws ses verify-email-identity --email-address YOUR_EMAIL --region us-east-1

2. Check email and click verification link

3. Confirm verification:
   aws ses get-identity-verification-attributes \\
     --identities YOUR_EMAIL --region us-east-1

4. Create test customer with verified email

5. Email should send successfully

IMPORTANT NOTES
---------------
- Domain verification (samwylock.com) is COMPLETE ✅
- FROM address (noreply@samwylock.com) works ✅
- Only issue is TO address in sandbox mode
- Production access solves this permanently

PRODUCTION ACCESS REQUEST TIPS
-------------------------------
When requesting production access:

DO:
✅ Be specific about your use case
✅ Mention opt-in (users create accounts)
✅ Explain you'll handle bounces/complaints
✅ Start with conservative limits (can increase later)
✅ Provide your domain (samwylock.com)

DON'T:
❌ Request very high limits initially
❌ Be vague about use case
❌ Ignore bounce/complaint handling
❌ Rush the form

Sample Use Case Description:
"Our application (Hovver Admin Dashboard) sends transactional emails
to registered customers:
- Welcome emails with temporary passwords upon account creation
- Password reset emails when requested
- All recipients have opted in by creating an account
- We will monitor bounce and complaint rates
- Expected volume: ~10-50 emails per day initially"

ALTERNATIVE FOR IMMEDIATE TESTING
----------------------------------
If you need to test RIGHT NOW while waiting for production access:

1. Verify your personal email:
   aws ses verify-email-identity --email-address sjw787.sw@gmail.com --region us-east-1

2. Create test customer using that verified email

3. Receive and test welcome email

4. Use forgot password flow to test that too

5. Request production access in parallel

VERIFICATION SCRIPT
-------------------
Created: verify_test_email.py

Run it to verify an email address for testing:
  python verify_test_email.py sjw787.sw+test@gmail.com

MONITORING
----------
After verification or production access:
- Check SES dashboard for sending statistics
- Monitor bounce rate (should be < 5%)
- Monitor complaint rate (should be < 0.1%)
- Set up SNS notifications for bounces/complaints (future)

TIMELINE
--------
Now:          Error: Can't send to unverified email
+5 minutes:   Verify test email → Can test immediately
+24-48 hours: Production access approved → Can send to anyone

RELATED FILES
-------------
- check_ses_sandbox.py - Check current SES status
- verify_test_email.py - Verify email for testing
- This documentation

QUICK COMMANDS
--------------
# Check sandbox status
python check_ses_sandbox.py

# Verify test email
aws ses verify-email-identity --email-address YOUR_EMAIL --region us-east-1

# List verified emails
aws ses list-identities --region us-east-1

# Check verification status
aws ses get-identity-verification-attributes --identities YOUR_EMAIL --region us-east-1

RECOMMENDED ACTION
------------------
1. RIGHT NOW: Verify your test email for immediate testing
   aws ses verify-email-identity --email-address sjw787.sw+test@gmail.com --region us-east-1

2. WITHIN 1 HOUR: Request production access via AWS Console
   (While waiting, you can test with verified email)

3. AFTER APPROVAL: Remove test email verifications (no longer needed)

This gives you:
✅ Immediate ability to test (verified email)
✅ Long-term solution (production access request in progress)
